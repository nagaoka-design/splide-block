(()=>{"use strict";const e=window.wp.blocks,l=window.wp.blockEditor,a=window.wp.components,t=window.wp.i18n,i=window.ReactJSXRuntime;(0,e.registerBlockType)("custom/splide-block",{title:(0,t.__)("Splideスライドショー","splide-block"),icon:"images-alt2",category:"media",attributes:{images:{type:"array",default:[]},autoplay:{type:"boolean",default:!0},interval:{type:"number",default:3e3},type:{type:"string",default:"loop"},perPage:{type:"number",default:1},perPageTablet:{type:"number",default:2},perPageMobile:{type:"number",default:1},breakpointTablet:{type:"number",default:768},breakpointMobile:{type:"number",default:480},height:{type:"string",default:""},heightRatio:{type:"number",default:0},heightRatioTablet:{type:"number",default:0},heightRatioMobile:{type:"number",default:0},fixedWidth:{type:"string",default:""},fixedHeight:{type:"string",default:""},fixedWidthTablet:{type:"string",default:""},fixedHeightTablet:{type:"string",default:""},fixedWidthMobile:{type:"string",default:""},fixedHeightMobile:{type:"string",default:""},gap:{type:"string",default:"1rem"},padding:{type:"string",default:"0"},arrows:{type:"boolean",default:!0},pagination:{type:"boolean",default:!0},speed:{type:"number",default:400},rewind:{type:"boolean",default:!1},drag:{type:"boolean",default:!0},keyboard:{type:"boolean",default:!1},objectFit:{type:"string",default:"cover"},cssMode:{type:"string",default:"standard"}},edit:e=>{const{attributes:o,setAttributes:n}=e,{images:d,autoplay:s,interval:p,type:r,perPage:b,perPageTablet:h,perPageMobile:g,breakpointTablet:c,breakpointMobile:x,height:u,heightRatio:_,heightRatioTablet:k,heightRatioMobile:C,fixedWidth:m,fixedHeight:f,fixedWidthTablet:j,fixedHeightTablet:y,fixedWidthMobile:v,fixedHeightMobile:T,gap:R,padding:w,arrows:M,pagination:P,speed:S,rewind:H,drag:W,keyboard:N,objectFit:B,cssMode:O}=o;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.InspectorControls,{children:[(0,i.jsxs)(a.PanelBody,{title:(0,t.__)("基本設定","splide-block"),initialOpen:!0,children:[(0,i.jsx)(a.SelectControl,{label:(0,t.__)("タイプ","splide-block"),value:r,options:[{label:"ループ",value:"loop"},{label:"スライド",value:"slide"},{label:"フェード",value:"fade"}],onChange:e=>n({type:e})}),(0,i.jsx)(a.ToggleControl,{label:(0,t.__)("自動再生","splide-block"),checked:s,onChange:e=>n({autoplay:e})}),s&&(0,i.jsx)(a.RangeControl,{label:(0,t.__)("間隔（ミリ秒）","splide-block"),value:p,onChange:e=>n({interval:e}),min:1e3,max:1e4,step:500}),(0,i.jsx)(a.RangeControl,{label:(0,t.__)("スライド速度（ミリ秒）","splide-block"),value:S,onChange:e=>n({speed:e}),min:100,max:2e3,step:100}),(0,i.jsx)(a.SelectControl,{label:(0,t.__)("CSSの読み込み","splide-block"),value:O,options:[{label:"標準CSS（デフォルトスタイル付き）",value:"standard"},{label:"コアCSS（最小限、カスタマイズ前提）",value:"core"},{label:"なし（自分で読み込む/完全カスタム）",value:"none"}],onChange:e=>n({cssMode:e}),help:"標準CSS=splide.min.css、コアCSS=splide-core.min.css"})]}),(0,i.jsxs)(a.PanelBody,{title:(0,t.__)("レスポンシブ設定","splide-block"),initialOpen:!1,children:[(0,i.jsx)("h3",{children:(0,t.__)("PC設定","splide-block")}),(0,i.jsx)(a.RangeControl,{label:(0,t.__)("表示枚数","splide-block"),value:b,onChange:e=>n({perPage:e}),min:1,max:6}),(0,i.jsx)(a.RangeControl,{label:(0,t.__)("高さ比率（heightRatio）","splide-block"),value:_,onChange:e=>n({heightRatio:e}),min:0,max:3,step:.05,help:"0の場合は無効。0.5625 = 16:9, 1 = 正方形, 1.7778 = 9:16"}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("スライドの幅（個別）","splide-block"),value:m,onChange:e=>n({fixedWidth:e}),help:"例: 300px"}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("スライドの高さ（個別）","splide-block"),value:f,onChange:e=>n({fixedHeight:e}),help:"例: 200px"}),(0,i.jsx)("hr",{style:{margin:"20px 0"}}),(0,i.jsx)("h3",{children:(0,t.__)("タブレット設定","splide-block")}),(0,i.jsx)(a.RangeControl,{label:(0,t.__)("ブレークポイント（px）","splide-block"),value:c,onChange:e=>n({breakpointTablet:e}),min:600,max:1200,step:10}),(0,i.jsx)(a.RangeControl,{label:(0,t.__)("表示枚数","splide-block"),value:h,onChange:e=>n({perPageTablet:e}),min:1,max:5}),(0,i.jsx)(a.RangeControl,{label:(0,t.__)("高さ比率（heightRatio）","splide-block"),value:k,onChange:e=>n({heightRatioTablet:e}),min:0,max:3,step:.05,help:"0の場合は無効"}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("スライドの幅（個別）","splide-block"),value:j,onChange:e=>n({fixedWidthTablet:e}),help:"例: 300px"}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("スライドの高さ（個別）","splide-block"),value:y,onChange:e=>n({fixedHeightTablet:e}),help:"例: 200px"}),(0,i.jsx)("hr",{style:{margin:"20px 0"}}),(0,i.jsx)("h3",{children:(0,t.__)("モバイル設定","splide-block")}),(0,i.jsx)(a.RangeControl,{label:(0,t.__)("ブレークポイント（px）","splide-block"),value:x,onChange:e=>n({breakpointMobile:e}),min:320,max:800,step:10}),(0,i.jsx)(a.RangeControl,{label:(0,t.__)("表示枚数","splide-block"),value:g,onChange:e=>n({perPageMobile:e}),min:1,max:3}),(0,i.jsx)(a.RangeControl,{label:(0,t.__)("高さ比率（heightRatio）","splide-block"),value:C,onChange:e=>n({heightRatioMobile:e}),min:0,max:3,step:.05,help:"0の場合は無効"}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("スライドの幅（個別）","splide-block"),value:v,onChange:e=>n({fixedWidthMobile:e}),help:"例: 300px"}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("スライドの高さ（個別）","splide-block"),value:T,onChange:e=>n({fixedHeightMobile:e}),help:"例: 200px"})]}),(0,i.jsxs)(a.PanelBody,{title:(0,t.__)("サイズ設定","splide-block"),initialOpen:!1,children:[(0,i.jsx)(a.SelectControl,{label:(0,t.__)("画像の表示方法","splide-block"),value:B,options:[{label:"カバー（切り抜き）",value:"cover"},{label:"全体表示（余白あり）",value:"contain"}],onChange:e=>n({objectFit:e})}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("スライダーの高さ（全体）","splide-block"),value:u,onChange:e=>n({height:e}),help:"例: 400px, 50vh。空欄の場合は画像の高さに自動調整"}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("スライドの幅（個別）","splide-block"),value:m,onChange:e=>n({fixedWidth:e}),help:"例: 300px。すべてのスライドを同じ幅に固定"}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("スライドの高さ（個別）","splide-block"),value:f,onChange:e=>n({fixedHeight:e}),help:"例: 200px。すべてのスライドを同じ高さに固定"})]}),(0,i.jsxs)(a.PanelBody,{title:(0,t.__)("スペース設定","splide-block"),initialOpen:!1,children:[(0,i.jsx)(a.TextControl,{label:(0,t.__)("スライド間の余白（gap）","splide-block"),value:R,onChange:e=>n({gap:e}),help:"例: 1rem, 20px"}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("左右の余白（padding）","splide-block"),value:w,onChange:e=>n({padding:e}),help:"例: 2rem, 5%"})]}),(0,i.jsxs)(a.PanelBody,{title:(0,t.__)("表示オプション","splide-block"),initialOpen:!1,children:[(0,i.jsx)(a.ToggleControl,{label:(0,t.__)("矢印を表示","splide-block"),checked:M,onChange:e=>n({arrows:e})}),(0,i.jsx)(a.ToggleControl,{label:(0,t.__)("ページネーションを表示","splide-block"),checked:P,onChange:e=>n({pagination:e})}),(0,i.jsx)(a.ToggleControl,{label:(0,t.__)("最後から最初に戻る（rewind）","splide-block"),checked:H,onChange:e=>n({rewind:e})}),(0,i.jsx)(a.ToggleControl,{label:(0,t.__)("ドラッグを有効化","splide-block"),checked:W,onChange:e=>n({drag:e})}),(0,i.jsx)(a.ToggleControl,{label:(0,t.__)("キーボード操作を有効化","splide-block"),checked:N,onChange:e=>n({keyboard:e})})]})]}),(0,i.jsxs)("div",{className:"splide-block-editor",children:[(0,i.jsx)(l.MediaUploadCheck,{children:(0,i.jsx)(l.MediaUpload,{onSelect:e=>{n({images:e.map(e=>({id:e.id,url:e.url,alt:e.alt||"",caption:e.caption||""}))})},allowedTypes:["image"],multiple:!0,gallery:!0,value:d.map(e=>e.id),render:({open:e})=>(0,i.jsx)(a.Button,{onClick:e,variant:"primary",className:"splide-block-upload-button",children:0===d.length?(0,t.__)("画像を選択","splide-block"):(0,t.__)("画像を変更","splide-block")})})}),d.length>0&&(0,i.jsxs)("div",{className:"splide-block-preview",children:[(0,i.jsxs)("p",{children:["選択された画像: ",d.length,"枚"]}),d.map((e,l)=>(0,i.jsxs)("div",{className:"splide-block-image-item",children:[(0,i.jsx)("img",{src:e.url,alt:e.alt}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("キャプション","splide-block"),value:e.caption||"",onChange:e=>{const a=[...d];a[l]={...a[l],caption:e},n({images:a})},placeholder:"キャプションを入力（任意）"}),(0,i.jsx)(a.Button,{onClick:()=>(e=>{const l=[...d];l.splice(e,1),n({images:l})})(l),isDestructive:!0,isSmall:!0,children:"削除"})]},l))]})]})]})},save:e=>{const{attributes:l}=e,{images:a,autoplay:t,interval:o,type:n,perPage:d,perPageTablet:s,perPageMobile:p,breakpointTablet:r,breakpointMobile:b,height:h,heightRatio:g,heightRatioTablet:c,heightRatioMobile:x,fixedWidth:u,fixedHeight:_,fixedWidthTablet:k,fixedHeightTablet:C,fixedWidthMobile:m,fixedHeightMobile:f,gap:j,padding:y,arrows:v,pagination:T,speed:R,rewind:w,drag:M,keyboard:P,objectFit:S,cssMode:H}=l;if(0===a.length)return null;const W={};return r>0&&(W[r]={perPage:s},c>0&&(W[r].heightRatio=c),k&&(W[r].fixedWidth=k),C&&(W[r].fixedHeight=C)),b>0&&(W[b]={perPage:p},x>0&&(W[b].heightRatio=x),m&&(W[b].fixedWidth=m),f&&(W[b].fixedHeight=f)),(0,i.jsx)("div",{className:"splide","data-type":n,"data-autoplay":t,"data-interval":o,"data-perpage":d,"data-gap":j,"data-padding":y,"data-arrows":v,"data-pagination":T,"data-speed":R,"data-rewind":w,"data-drag":M,"data-keyboard":P,"data-height":h,"data-heightratio":g>0?g:"","data-fixedwidth":u,"data-fixedheight":_,"data-objectfit":S,"data-cssmode":H,"data-breakpoints":Object.keys(W).length>0?JSON.stringify(W):"",children:(0,i.jsx)("div",{className:"splide__track",children:(0,i.jsx)("ul",{className:"splide__list",children:a.map((e,l)=>(0,i.jsxs)("li",{className:"splide__slide",children:[(0,i.jsx)("img",{src:e.url,alt:e.alt}),e.caption&&(0,i.jsx)("div",{className:"splide__slide-caption",children:e.caption})]},l))})})})}})})();