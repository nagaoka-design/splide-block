(()=>{"use strict";const e=window.wp.blocks,l=window.wp.blockEditor,a=window.wp.components,i=window.wp.i18n,t=window.ReactJSXRuntime;(0,e.registerBlockType)("custom/splide-block",{title:(0,i.__)("Splideスライドショー","splide-block"),icon:"images-alt2",category:"media",attributes:{images:{type:"array",default:[]},autoplay:{type:"boolean",default:!0},interval:{type:"number",default:3e3},type:{type:"string",default:"loop"},perPage:{type:"number",default:1},mediaQuery:{type:"string",default:"max"},perPageTablet:{type:"number",default:2},perPageMobile:{type:"number",default:1},breakpointTablet:{type:"number",default:768},breakpointMobile:{type:"number",default:480},height:{type:"string",default:""},heightRatio:{type:"number",default:0},heightRatioTablet:{type:"number",default:0},heightRatioMobile:{type:"number",default:0},fixedWidth:{type:"string",default:""},fixedHeight:{type:"string",default:""},fixedWidthTablet:{type:"string",default:""},fixedHeightTablet:{type:"string",default:""},fixedWidthMobile:{type:"string",default:""},fixedHeightMobile:{type:"string",default:""},gap:{type:"string",default:"1rem"},padding:{type:"string",default:"0"},arrows:{type:"boolean",default:!0},pagination:{type:"boolean",default:!0},speed:{type:"number",default:400},rewind:{type:"boolean",default:!1},drag:{type:"boolean",default:!0},keyboard:{type:"boolean",default:!1},objectFit:{type:"string",default:"cover"},cssMode:{type:"string",default:"standard"}},edit:e=>{const{attributes:o,setAttributes:n}=e,{images:d,autoplay:s,interval:p,type:h,perPage:r,mediaQuery:b,perPageTablet:g,perPageMobile:x,breakpointTablet:c,breakpointMobile:_,height:u,heightRatio:m,heightRatioTablet:C,heightRatioMobile:k,fixedWidth:j,fixedHeight:f,fixedWidthTablet:v,fixedHeightTablet:y,fixedWidthMobile:T,fixedHeightMobile:R,gap:M,padding:w,arrows:P,pagination:H,speed:W,rewind:S,drag:N,keyboard:B,objectFit:F,cssMode:O}=o;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.InspectorControls,{children:[(0,t.jsxs)(a.PanelBody,{title:(0,i.__)("基本設定","splide-block"),initialOpen:!0,children:[(0,t.jsx)(a.SelectControl,{label:(0,i.__)("タイプ","splide-block"),value:h,options:[{label:"ループ",value:"loop"},{label:"スライド",value:"slide"},{label:"フェード",value:"fade"}],onChange:e=>n({type:e})}),(0,t.jsx)(a.ToggleControl,{label:(0,i.__)("自動再生","splide-block"),checked:s,onChange:e=>n({autoplay:e})}),s&&(0,t.jsx)(a.RangeControl,{label:(0,i.__)("間隔（ミリ秒）","splide-block"),value:p,onChange:e=>n({interval:e}),min:1e3,max:1e4,step:500}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("スライド速度（ミリ秒）","splide-block"),value:W,onChange:e=>n({speed:e}),min:100,max:2e3,step:100}),(0,t.jsx)(a.SelectControl,{label:(0,i.__)("CSSの読み込み","splide-block"),value:O,options:[{label:"標準CSS（デフォルトスタイル付き）",value:"standard"},{label:"コアCSS（最小限、カスタマイズ前提）",value:"core"},{label:"なし（自分で読み込む/完全カスタム）",value:"none"}],onChange:e=>n({cssMode:e}),help:"標準CSS=splide.min.css、コアCSS=splide-core.min.css"})]}),(0,t.jsxs)(a.PanelBody,{title:(0,i.__)("レスポンシブ設定","splide-block"),initialOpen:!1,children:[(0,t.jsx)(a.RadioControl,{label:(0,i.__)("レスポンシブモード","splide-block"),selected:b,options:[{label:"デスクトップファースト（max-width）",value:"max"},{label:"モバイルファースト（min-width）",value:"min"}],onChange:e=>n({mediaQuery:e}),help:"max"===b?"デフォルト設定が最も広い画面用になります。ブレークポイントは「◯◯px以下」の意味です。":"デフォルト設定が最も狭い画面用になります。ブレークポイントは「◯◯px以上」の意味です。"}),(0,t.jsx)("hr",{style:{margin:"20px 0"}}),"max"===b?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{children:(0,i.__)("PC設定（デフォルト）","splide-block")}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("表示枚数","splide-block"),value:r,onChange:e=>n({perPage:e}),min:1,max:6}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("高さ比率（heightRatio）","splide-block"),value:m,onChange:e=>n({heightRatio:e}),min:0,max:3,step:1e-4,help:"0の場合は無効。0.5625 = 16:9, 1 = 正方形, 1.7778 = 9:16"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの幅（個別）","splide-block"),value:j,onChange:e=>n({fixedWidth:e}),help:"例: 300px"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの高さ（個別）","splide-block"),value:f,onChange:e=>n({fixedHeight:e}),help:"例: 200px"}),(0,t.jsx)("hr",{style:{margin:"20px 0"}}),(0,t.jsx)("h3",{children:(0,i.__)("タブレット設定","splide-block")}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("ブレークポイント（px以下）","splide-block"),value:c,onChange:e=>n({breakpointTablet:e}),min:600,max:1200,step:1}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("表示枚数","splide-block"),value:g,onChange:e=>n({perPageTablet:e}),min:1,max:5}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("高さ比率（heightRatio）","splide-block"),value:C,onChange:e=>n({heightRatioTablet:e}),min:0,max:3,step:1e-4,help:"0の場合は無効"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの幅（個別）","splide-block"),value:v,onChange:e=>n({fixedWidthTablet:e}),help:"例: 300px"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの高さ（個別）","splide-block"),value:y,onChange:e=>n({fixedHeightTablet:e}),help:"例: 200px"}),(0,t.jsx)("hr",{style:{margin:"20px 0"}}),(0,t.jsx)("h3",{children:(0,i.__)("モバイル設定","splide-block")}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("ブレークポイント（px以下）","splide-block"),value:_,onChange:e=>n({breakpointMobile:e}),min:320,max:800,step:1}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("表示枚数","splide-block"),value:x,onChange:e=>n({perPageMobile:e}),min:1,max:3}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("高さ比率（heightRatio）","splide-block"),value:k,onChange:e=>n({heightRatioMobile:e}),min:0,max:3,step:1e-4,help:"0の場合は無効"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの幅（個別）","splide-block"),value:T,onChange:e=>n({fixedWidthMobile:e}),help:"例: 300px"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの高さ（個別）","splide-block"),value:R,onChange:e=>n({fixedHeightMobile:e}),help:"例: 200px"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{children:(0,i.__)("モバイル設定（デフォルト）","splide-block")}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("表示枚数","splide-block"),value:x,onChange:e=>n({perPageMobile:e}),min:1,max:3}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("高さ比率（heightRatio）","splide-block"),value:k,onChange:e=>n({heightRatioMobile:e}),min:0,max:3,step:1e-4,help:"0の場合は無効"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの幅（個別）","splide-block"),value:T,onChange:e=>n({fixedWidthMobile:e}),help:"例: 300px"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの高さ（個別）","splide-block"),value:R,onChange:e=>n({fixedHeightMobile:e}),help:"例: 200px"}),(0,t.jsx)("hr",{style:{margin:"20px 0"}}),(0,t.jsx)("h3",{children:(0,i.__)("タブレット設定","splide-block")}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("ブレークポイント（px以上）","splide-block"),value:_,onChange:e=>n({breakpointMobile:e}),min:320,max:800,step:1}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("表示枚数","splide-block"),value:g,onChange:e=>n({perPageTablet:e}),min:1,max:5}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("高さ比率（heightRatio）","splide-block"),value:C,onChange:e=>n({heightRatioTablet:e}),min:0,max:3,step:1e-4,help:"0の場合は無効"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの幅（個別）","splide-block"),value:v,onChange:e=>n({fixedWidthTablet:e}),help:"例: 300px"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの高さ（個別）","splide-block"),value:y,onChange:e=>n({fixedHeightTablet:e}),help:"例: 200px"}),(0,t.jsx)("hr",{style:{margin:"20px 0"}}),(0,t.jsx)("h3",{children:(0,i.__)("PC設定","splide-block")}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("ブレークポイント（px以上）","splide-block"),value:c,onChange:e=>n({breakpointTablet:e}),min:600,max:1200,step:1}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("表示枚数","splide-block"),value:r,onChange:e=>n({perPage:e}),min:1,max:6}),(0,t.jsx)(a.RangeControl,{label:(0,i.__)("高さ比率（heightRatio）","splide-block"),value:m,onChange:e=>n({heightRatio:e}),min:0,max:3,step:1e-4,help:"0の場合は無効。0.5625 = 16:9, 1 = 正方形, 1.7778 = 9:16"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの幅（個別）","splide-block"),value:j,onChange:e=>n({fixedWidth:e}),help:"例: 300px"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの高さ（個別）","splide-block"),value:f,onChange:e=>n({fixedHeight:e}),help:"例: 200px"})]})]}),(0,t.jsxs)(a.PanelBody,{title:(0,i.__)("サイズ設定","splide-block"),initialOpen:!1,children:[(0,t.jsx)(a.SelectControl,{label:(0,i.__)("画像の表示方法","splide-block"),value:F,options:[{label:"カバー（切り抜き）",value:"cover"},{label:"全体表示（余白あり）",value:"contain"}],onChange:e=>n({objectFit:e})}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライダーの高さ（全体）","splide-block"),value:u,onChange:e=>n({height:e}),help:"例: 400px, 50vh。空欄の場合は画像の高さに自動調整"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの幅（個別）","splide-block"),value:j,onChange:e=>n({fixedWidth:e}),help:"例: 300px。すべてのスライドを同じ幅に固定"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライドの高さ（個別）","splide-block"),value:f,onChange:e=>n({fixedHeight:e}),help:"例: 200px。すべてのスライドを同じ高さに固定"})]}),(0,t.jsxs)(a.PanelBody,{title:(0,i.__)("スペース設定","splide-block"),initialOpen:!1,children:[(0,t.jsx)(a.TextControl,{label:(0,i.__)("スライド間の余白（gap）","splide-block"),value:M,onChange:e=>n({gap:e}),help:"例: 1rem, 20px"}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("左右の余白（padding）","splide-block"),value:w,onChange:e=>n({padding:e}),help:"例: 2rem, 5%"})]}),(0,t.jsxs)(a.PanelBody,{title:(0,i.__)("表示オプション","splide-block"),initialOpen:!1,children:[(0,t.jsx)(a.ToggleControl,{label:(0,i.__)("矢印を表示","splide-block"),checked:P,onChange:e=>n({arrows:e})}),(0,t.jsx)(a.ToggleControl,{label:(0,i.__)("ページネーションを表示","splide-block"),checked:H,onChange:e=>n({pagination:e})}),(0,t.jsx)(a.ToggleControl,{label:(0,i.__)("最後から最初に戻る（rewind）","splide-block"),checked:S,onChange:e=>n({rewind:e})}),(0,t.jsx)(a.ToggleControl,{label:(0,i.__)("ドラッグを有効化","splide-block"),checked:N,onChange:e=>n({drag:e})}),(0,t.jsx)(a.ToggleControl,{label:(0,i.__)("キーボード操作を有効化","splide-block"),checked:B,onChange:e=>n({keyboard:e})})]})]}),(0,t.jsxs)("div",{className:"splide-block-editor",children:[(0,t.jsx)(l.MediaUploadCheck,{children:(0,t.jsx)(l.MediaUpload,{onSelect:e=>{n({images:e.map(e=>({id:e.id,url:e.url,alt:e.alt||"",caption:e.caption||""}))})},allowedTypes:["image"],multiple:!0,gallery:!0,value:d.map(e=>e.id),render:({open:e})=>(0,t.jsx)(a.Button,{onClick:e,variant:"primary",className:"splide-block-upload-button",children:0===d.length?(0,i.__)("画像を選択","splide-block"):(0,i.__)("画像を変更","splide-block")})})}),d.length>0&&(0,t.jsxs)("div",{className:"splide-block-preview",children:[(0,t.jsxs)("p",{children:["選択された画像: ",d.length,"枚"]}),d.map((e,l)=>(0,t.jsxs)("div",{className:"splide-block-image-item",children:[(0,t.jsx)("img",{src:e.url,alt:e.alt}),(0,t.jsx)(a.TextControl,{label:(0,i.__)("キャプション","splide-block"),value:e.caption||"",onChange:e=>{const a=[...d];a[l]={...a[l],caption:e},n({images:a})},placeholder:"キャプションを入力（任意）"}),(0,t.jsx)(a.Button,{onClick:()=>(e=>{const l=[...d];l.splice(e,1),n({images:l})})(l),isDestructive:!0,isSmall:!0,children:"削除"})]},l))]})]})]})},save:e=>{const{attributes:l}=e,{images:a,autoplay:i,interval:o,type:n,perPage:d,mediaQuery:s,perPageTablet:p,perPageMobile:h,breakpointTablet:r,breakpointMobile:b,height:g,heightRatio:x,heightRatioTablet:c,heightRatioMobile:_,fixedWidth:u,fixedHeight:m,fixedWidthTablet:C,fixedHeightTablet:k,fixedWidthMobile:j,fixedHeightMobile:f,gap:v,padding:y,arrows:T,pagination:R,speed:M,rewind:w,drag:P,keyboard:H,objectFit:W,cssMode:S}=l;if(0===a.length)return null;const N={};return"max"===s?(r>0&&(N[r]={perPage:p},c>0&&(N[r].heightRatio=c),C&&(N[r].fixedWidth=C),k&&(N[r].fixedHeight=k)),b>0&&(N[b]={perPage:h},_>0&&(N[b].heightRatio=_),j&&(N[b].fixedWidth=j),f&&(N[b].fixedHeight=f))):(b>0&&(N[b]={perPage:p},c>0&&(N[b].heightRatio=c),C&&(N[b].fixedWidth=C),k&&(N[b].fixedHeight=k)),r>0&&(N[r]={perPage:d},x>0&&(N[r].heightRatio=x),u&&(N[r].fixedWidth=u),m&&(N[r].fixedHeight=m))),(0,t.jsx)("div",{className:"splide","data-type":n,"data-autoplay":i,"data-interval":o,"data-perpage":"max"===s?d:h,"data-mediaquery":s,"data-gap":v,"data-padding":y,"data-arrows":T,"data-pagination":R,"data-speed":M,"data-rewind":w,"data-drag":P,"data-keyboard":H,"data-height":g,"data-heightratio":"max"===s?x>0?x:"":_>0?_:"","data-fixedwidth":"max"===s?u:j,"data-fixedheight":"max"===s?m:f,"data-objectfit":W,"data-cssmode":S,"data-breakpoints":Object.keys(N).length>0?JSON.stringify(N):"",children:(0,t.jsx)("div",{className:"splide__track",children:(0,t.jsx)("ul",{className:"splide__list",children:a.map((e,l)=>(0,t.jsxs)("li",{className:"splide__slide",children:[(0,t.jsx)("img",{src:e.url,alt:e.alt}),e.caption&&(0,t.jsx)("div",{className:"splide__slide-caption",children:e.caption})]},l))})})})}})})();